import{a as b,b as y,r as t,j as f,h as C}from"./index-B1l4BiDB.js";import{u as F,a as R}from"./hooks-Dn7CqnMA.js";import{C as T}from"./CreateEditForm-C5T65-Xa.js";const w=()=>{const P=F(),r=b(),{id:v}=y(),e=R(a=>a.product.products.find(s=>s.id===Number(v))),[n,g]=t.useState((e==null?void 0:e.title)||""),[o,p]=t.useState((e==null?void 0:e.description)||""),[l,c]=t.useState((e==null?void 0:e.image)||""),[m,S]=t.useState((e==null?void 0:e.image)||""),[d,h]=t.useState((e==null?void 0:e.price)||0),[j,x]=t.useState(null),[A,E]=t.useState(!1);t.useEffect(()=>{e||r("/products")},[e,r]);const D=a=>{if(a.preventDefault(),!n||!o||!l&&!m||d<=0){x("Please fill in all fields correctly.");return}const s=l||m,i={id:e==null?void 0:e.id,updates:{title:n,description:o,image:s,price:d}};P(C(i)),E(!0),setTimeout(()=>{E(!1),r(-1)},600),g(""),p(""),c(""),S(""),h(0),x(null)},I=a=>{var i;const s=(i=a.target.files)==null?void 0:i[0];if(s){const u=new FileReader;u.onloadend=()=>c(u.result),u.readAsDataURL(s)}};return f.jsx(f.Fragment,{children:f.jsx(T,{title:n,setTitle:g,description:o,setDescription:p,image:l,setImage:c,imageUrl:m,setImageUrl:S,price:d,setPrice:h,error:j,activated:A,handleSubmit:D,handleImageChange:I,formType:"edit"})})};export{w as default};
